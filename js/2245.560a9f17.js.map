{"version":3,"file":"js/2245.560a9f17.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/admin/TambahMatePelajaran.vue","webpack://resep-bunda/./src/views/admin/TambahMatePelajaran.vue?e59e"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Tambah Mata Pelajaran</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\n        <ion-refresher-content />\n      </ion-refresher>\n      <ion-content class=\"ion-padding\">\n        <ion-item>\n          <ion-label position=\"floating\">Pilih Kelas</ion-label>\n          <ion-select v-model=\"selectedClass\" placeholder=\"Pilih Kelas\" @ionChange=\"onClassChange\">\n            <ion-select-option v-for=\"kelas in classList\" :key=\"kelas.id\" :value=\"kelas.id\">\n              {{ kelas.name }}\n            </ion-select-option>\n          </ion-select>\n\n        </ion-item>\n        <ion-item>\n          <ion-label position=\"floating\">Nama Mata Pelajaran</ion-label>\n          <ion-input\n            v-model=\"subjectName\"\n            placeholder=\"Masukkan nama mata pelajaran\"\n          ></ion-input>\n        </ion-item>\n        <ion-button expand=\"block\" @click=\"addSubject\" style=\"color: white\"\n          >Tambah Mata Pelajaran</ion-button\n        >\n\n        <ion-grid class=\"ion-padding\">\n          <ion-row>\n            <ion-col>\n              <h2>Daftar Mata Pelajaran</h2>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Nama Mata Pelajaran</th>\n                    <th>Kelas</th>\n                    <th>Aksi</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"subject in subjectList\" :key=\"subject.id\">\n                    <td>{{ subject.name }}</td>\n                    <td>{{ subject.kelas }}</td>\n\n                    <td>\n                      <ion-button\n                        color=\"warning\"\n                        @click=\"openEditModal(subject)\"\n                        >Edit</ion-button\n                      >\n                      <ion-button\n                        color=\"danger\"\n                        @click=\"deleteSubject(subject.id)\"\n                        >Hapus</ion-button\n                      >\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-content>\n\n      <ion-modal :is-open=\"isEditModalOpen\" @did-dismiss=\"closeEditModal\">\n        <ion-header>\n          <ion-toolbar>\n            <ion-title>Edit Mata Pelajaran</ion-title>\n            <ion-buttons slot=\"end\">\n              <ion-button @click=\"closeEditModal\">Close</ion-button>\n            </ion-buttons>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-item>\n            <ion-label position=\"floating\">Nama Mata Pelajaran</ion-label>\n            <ion-input v-model=\"editSubjectName\"></ion-input>\n          </ion-item>\n          <ion-button expand=\"block\" @click=\"updateSubject\"\n            >Simpan Perubahan</ion-button\n          >\n        </ion-content>\n      </ion-modal>\n\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonModal,\n  IonItem,\n  IonLabel,\n  IonInput,\n  IonToast,\n  IonSelect,\n  IonSelectOption,\n} from \"@ionic/vue\";\nimport { ref, onMounted } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  addDoc,\n  getDocs,\n  updateDoc,\n  deleteDoc,\n  doc,\n  serverTimestamp,\n} from \"firebase/firestore\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst classList = ref([]); // Daftar kelas\nconst selectedClass = ref(\"\"); // Kelas yang dipilih\nconst selectedClassName = ref(\"\"); // Nama kelas yang dipilih\n\nconst fetchClasses = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"kelas\"));\n    classList.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      name: doc.data().name,\n    }));\n  } catch (error) {\n    console.error(\"Error fetching classes:\", error);\n    showToast(\"Terjadi kesalahan saat mengambil data kelas.\", \"danger\");\n  }\n};\n\n\nconst db = getFirestore(firebaseApp);\nconst subjectName = ref(\"\");\nconst subjectList = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\nconst isEditModalOpen = ref(false);\nconst editSubjectName = ref(\"\");\nconst editSubjectId = ref(\"\");\n\nconst fetchSubjects = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"mataPelajaran\"));\n    subjectList.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  } catch (error) {\n    console.error(\"Error fetching subjects:\", error);\n    showToast(\n      \"Terjadi kesalahan saat mengambil data mata pelajaran.\",\n      \"danger\"\n    );\n  }\n};\n\nconst onClassChange = () => {\n  const selected = classList.value.find((kelas) => kelas.id === selectedClass.value);\n  selectedClassName.value = selected ? selected.name : \"\";\n};\n\n\nconst addSubject = async () => {\n  console.log(\"Selected Class:\", selectedClass.value); // Debugging\n\n  if (!selectedClass.value) {\n    showToast(\"Kelas harus dipilih\", \"danger\");\n    return;\n  }\n  if (!subjectName.value) {\n    showToast(\"Nama mata pelajaran tidak boleh kosong\", \"danger\");\n    return;\n  }\n  try {\n    await addDoc(collection(db, \"mataPelajaran\"), {\n      name: subjectName.value,\n      kelas: selectedClassName.value, // Simpan nama kelas\n      classId: selectedClass.value, // Tambahkan classId\n      createdAt: serverTimestamp(),\n    });\n    showToast(\"Mata pelajaran berhasil ditambahkan\", \"success\");\n    subjectName.value = \"\"; // Reset input\n    selectedClass.value = \"\"; // Reset kelas\n    fetchSubjects(); // Refresh daftar mata pelajaran\n  } catch (error) {\n    console.error(\"Error adding subject:\", error);\n    showToast(\"Terjadi kesalahan saat menambahkan mata pelajaran\", \"danger\");\n  }\n};\n\n\nconst openEditModal = (subject) => {\n  editSubjectName.value = subject.name;\n  editSubjectId.value = subject.id;\n  isEditModalOpen.value = true;\n};\n\nconst closeEditModal = () => {\n  isEditModalOpen.value = false;\n  editSubjectName.value = \"\";\n  editSubjectId.value = \"\";\n};\n\nconst updateSubject = async () => {\n  if (!editSubjectName.value) {\n    showToast(\"Nama mata pelajaran tidak boleh kosong\", \"danger\");\n    return;\n  }\n  try {\n    await updateDoc(doc(db, \"mataPelajaran\", editSubjectId.value), {\n      name: editSubjectName.value,\n    });\n    showToast(\"Mata pelajaran berhasil diperbarui\", \"success\");\n    closeEditModal();\n    fetchSubjects(); // Refresh the list\n  } catch (error) {\n    console.error(\"Error updating subject:\", error);\n    showToast(\"Terjadi kesalahan saat memperbarui mata pelajaran\", \"danger\");\n  }\n};\n\nconst deleteSubject = async (subjectId) => {\n  try {\n    await deleteDoc(doc(db, \"mataPelajaran\", subjectId));\n    showToast(\"Mata pelajaran berhasil dihapus\", \"success\");\n    fetchSubjects(); // Refresh the list\n  } catch (error) {\n    console.error(\"Error deleting subject:\", error);\n    showToast(\"Terjadi kesalahan saat menghapus mata pelajaran\", \"danger\");\n  }\n};\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n\nconst doRefresh = (event) => {\n  setTimeout(() => {\n    fetchSubjects();\n    event.target.complete();\n  }, 2000);\n};\n\nonMounted(() => {\n  fetchSubjects();\n  fetchClasses(); // Ambil daftar kelas\n});\n</script>\n\n<style scoped>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\nth {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\ntbody tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\ntbody tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n","import script from \"./TambahMatePelajaran.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TambahMatePelajaran.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TambahMatePelajaran.vue?vue&type=style&index=0&id=37530ae2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-37530ae2\"]])\n\nexport default __exports__"],"names":["classList","ref","selectedClass","selectedClassName","fetchClasses","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","querySnapshot","wrap","_context","prev","next","getDocs","collection","db","sent","value","docs","map","doc","id","name","data","t0","console","error","showToast","stop","apply","arguments","getFirestore","firebaseApp","subjectName","subjectList","toast","isOpen","message","duration","color","isEditModalOpen","editSubjectName","editSubjectId","fetchSubjects","_ref2","_callee2","_context2","_objectSpread","onClassChange","selected","find","kelas","addSubject","_ref3","_callee3","_context3","log","abrupt","addDoc","classId","createdAt","serverTimestamp","openEditModal","subject","closeEditModal","updateSubject","_ref4","_callee4","_context4","updateDoc","deleteSubject","_ref5","_callee5","subjectId","_context5","deleteDoc","_x","doRefresh","event","setTimeout","target","complete","onMounted","__exports__"],"sourceRoot":""}