{"version":3,"file":"js/7695.a2f6f320.js","mappings":"+eAuDA,IAAMA,GAAYC,EAAAA,EAAAA,MAGZC,EAAe,CACnBC,UAAW,WACXC,MAAM,GAIFC,GAAYC,EAAAA,EAAAA,IAAI,IAChBC,GAAYD,EAAAA,EAAAA,IAAI,IAChBE,GAAoBF,EAAAA,EAAAA,IAAI,GAE9B,SACeG,IAAW,OAAAC,EAAAC,MAAC,KAADC,UAAA,CAoB1B,SAAAF,IAFC,OAEDA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MApBA,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAE8D,OAF9DF,EAAAC,KAAA,EAEUJ,GAAmBM,EAAAA,EAAAA,IAAWvB,EAAW,UAAWoB,EAAAE,KAAA,GAC9BE,EAAAA,EAAAA,IAAQP,GAAiB,OAA/CC,EAAaE,EAAAK,KAGnBpB,EAAUqB,MAAQR,EAAcS,KAAKC,KAAI,SAACC,GAAG,MAAM,CACjDC,UAAWD,EAAIE,OAAOD,UACtBE,WAAYH,EAAIE,OAAOC,WACxB,KAGDC,EAAAA,EAAAA,KAAS,WACPC,GACF,IAAGd,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAe,GAAAf,EAAA,YAEHgB,QAAQC,MAAM,yBAAwBjB,EAAAe,IAAS,yBAAAf,EAAAkB,OAAA,GAAAtB,EAAA,kBAElDN,EAAAC,MAAA,KAAAC,UAAA,UAGc2B,EAAiBC,GAAA,OAAAC,EAAA9B,MAAC,KAADC,UAAA,CAqBhC,SAAA6B,IAFC,OAEDA,GAAA5B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MArBA,SAAA2B,EAAiCC,GAAK,IAAAC,EAAAC,EAAAC,EAAA,OAAAhC,EAAAA,EAAAA,KAAAK,MAAA,SAAA4B,GAAA,eAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,OACP,OAAvBsB,EAASD,EAAMK,OAAQD,EAAAzB,KAAA,EACHsB,EAAOK,iBAAgB,OAA3CJ,EAAWE,EAAAtB,KACjBjB,EAAkBkB,MAAQmB,EAG1BtC,EAAUmB,MAAMwB,SAAQ,SAACC,GACnBA,IACFA,EAAMC,QACND,EAAME,OAAQ,EAElB,IAGMP,EAAcvC,EAAUmB,MAAMmB,GAChCC,IACFA,EAAYO,OAAQ,EACpBP,EAAYQ,QACb,wBAAAP,EAAAT,OAAA,GAAAI,EAAA,KACFD,EAAA9B,MAAA,KAAAC,UAAA,CAGD,SAASsB,IACP,GAAI3B,EAAUmB,MAAM6B,OAAS,EAAG,CAC9B,IAAMC,EAAajD,EAAUmB,MAAM,GAC/B8B,IACFA,EAAWH,OAAQ,EACnBG,EAAWF,OAEf,CACF,CAGA,SAASG,IACPlD,EAAUmB,MAAMwB,SAAQ,SAACC,GACnBA,IACFA,EAAMC,QACND,EAAMO,YAAc,EAExB,GACF,C,OAGAC,EAAAA,EAAAA,KAAU,WACRlD,GACF,KAGAmD,EAAAA,EAAAA,KAAmB,WACjBH,GACF,I,6kCCtIA,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,G","sources":["webpack://resep-bunda/./src/views/HalamanShort.vue","webpack://resep-bunda/./src/views/HalamanShort.vue?196a"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Shorts Video</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <!-- IonSlides -->\n      <ion-slides\n        v-if=\"videoList.length > 0\"\n        :key=\"videoList.length\"\n        :options=\"slideOptions\"\n        class=\"video-slider\"\n        @ionSlideDidChange=\"handleSlideChange\"\n      >\n        <ion-slide v-for=\"(video, index) in videoList\" :key=\"index\">\n          <video\n            ref=\"videoRefs\"\n            :src=\"video.linkvideo\"\n            loop\n            playsinline\n            class=\"video-slide\"\n          ></video>\n          <div class=\"video-meta\">\n            <h3>{{ video.titlevideo }}</h3>\n          </div>\n        </ion-slide>\n      </ion-slides>\n      <!-- Tampilkan loading jika videoList kosong -->\n      <div v-else class=\"loading\">\n        <p>Loading videos...</p>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonSlides,\n  IonSlide,\n  onIonViewWillLeave,\n} from \"@ionic/vue\";\n\nimport { ref, onMounted, nextTick } from \"vue\";\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\n\n// Inisialisasi Firestore\nconst firestore = getFirestore();\n\n// Konfigurasi IonSlides\nconst slideOptions = {\n  direction: \"vertical\", // Geser vertikal\n  loop: false, // Tidak perlu looping slider\n};\n\n// Daftar video dan referensi untuk video HTML\nconst videoList = ref([]);\nconst videoRefs = ref([]); // Array untuk referensi elemen video\nconst currentSlideIndex = ref(0); // Menyimpan indeks slide aktif\n\n// Fungsi untuk mengambil video dari Firestore\nasync function fetchVideos() {\n  try {\n    const shortsCollection = collection(firestore, \"shorts\"); // Nama koleksi Firestore Anda\n    const querySnapshot = await getDocs(shortsCollection);\n\n    // Map data video dari Firestore ke videoList\n    videoList.value = querySnapshot.docs.map((doc) => ({\n      linkvideo: doc.data().linkvideo, // URL video\n      titlevideo: doc.data().titlevideo, // Judul video\n    }));\n\n    // Tunggu hingga DOM selesai diperbarui, lalu putar video pertama\n    nextTick(() => {\n      playFirstVideo();\n    });\n  } catch (error) {\n    console.error(\"Error fetching videos:\", error);\n  }\n}\n\n// Fungsi untuk menangani perubahan slide\nasync function handleSlideChange(event) {\n  const slider = event.target; // IonSlides instance\n  const activeIndex = await slider.getActiveIndex(); // Dapatkan indeks slide aktif\n  currentSlideIndex.value = activeIndex; // Perbarui indeks aktif\n\n  // Pause semua video\n  videoRefs.value.forEach((video) => {\n    if (video) {\n      video.pause();\n      video.muted = true; // Mute semua video\n    }\n  });\n\n  // Play video di slide aktif\n  const activeVideo = videoRefs.value[activeIndex];\n  if (activeVideo) {\n    activeVideo.muted = false; // Pastikan audio hanya diaktifkan pada video aktif\n    activeVideo.play();\n  }\n}\n\n// Fungsi untuk memutar video pertama\nfunction playFirstVideo() {\n  if (videoRefs.value.length > 0) {\n    const firstVideo = videoRefs.value[0];\n    if (firstVideo) {\n      firstVideo.muted = false; // Unmute video pertama\n      firstVideo.play(); // Putar video pertama\n    }\n  }\n}\n\n// Fungsi untuk menghentikan semua video\nfunction stopAllVideos() {\n  videoRefs.value.forEach((video) => {\n    if (video) {\n      video.pause(); // Hentikan video\n      video.currentTime = 0; // Reset ke awal\n    }\n  });\n}\n\n// Lifecycle Hook: Ambil data saat komponen dimuat\nonMounted(() => {\n  fetchVideos();\n});\n\n// Lifecycle Hook: Hentikan semua video saat pengguna meninggalkan halaman/tab\nonIonViewWillLeave(() => {\n  stopAllVideos(); // Pastikan semua video berhenti ketika pengguna keluar dari halaman\n});\n</script>\n\n<style scoped>\n.video-slider {\n  height: 100%; /* Agar slider memenuhi layar */\n}\n\n.video-slide {\n  width: 100%;\n  height: 100vh; /* Video memenuhi tinggi layar ponsel */\n  object-fit: cover; /* Proporsi video tetap terjaga */\n}\n\n.video-meta {\n  position: absolute;\n  bottom: 20px;\n  left: 20px;\n  color: white;\n  text-shadow: 0px 0px 5px black;\n}\n\n.video-meta h3 {\n  margin: 0;\n  font-size: 18px;\n}\n\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  font-size: 18px;\n  color: gray;\n}\n</style>\n","import script from \"./HalamanShort.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HalamanShort.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HalamanShort.vue?vue&type=style&index=0&id=20c977dc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-20c977dc\"]])\n\nexport default __exports__"],"names":["firestore","getFirestore","slideOptions","direction","loop","videoList","ref","videoRefs","currentSlideIndex","fetchVideos","_fetchVideos","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","shortsCollection","querySnapshot","wrap","_context","prev","next","collection","getDocs","sent","value","docs","map","doc","linkvideo","data","titlevideo","nextTick","playFirstVideo","t0","console","error","stop","handleSlideChange","_x","_handleSlideChange","_callee2","event","slider","activeIndex","activeVideo","_context2","target","getActiveIndex","forEach","video","pause","muted","play","length","firstVideo","stopAllVideos","currentTime","onMounted","onIonViewWillLeave","__exports__"],"sourceRoot":""}