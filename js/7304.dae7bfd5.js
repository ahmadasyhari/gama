"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[7304],{7304:(e,a,n)=>{n.r(a),n.d(a,{default:()=>j});var r=n(124),t=n(8534),o=(n(1249),n(2222),n(7658),n(1539),n(8783),n(3948),n(3710),n(2707),n(6252)),u=n(2262),l=n(3577),s=n(4797),c=n(6100),i=n(5856),d=n(4105),f=function(e){return(0,o.dD)("data-v-625292cf"),e=e(),(0,o.Cn)(),e},k=f((function(){return(0,o._)("h2",null,"Daftar Hasil Ujian",-1)})),p=f((function(){return(0,o._)("strong",null,"Sekolah:",-1)})),h=f((function(){return(0,o._)("strong",null,"Skor TPS:",-1)})),m=f((function(){return(0,o._)("strong",null,"Skor MM:",-1)})),g=f((function(){return(0,o._)("strong",null,"Skor LBIND:",-1)})),w=f((function(){return(0,o._)("strong",null,"Skor LBING:",-1)})),v=f((function(){return(0,o._)("strong",null,"Total Skor:",-1)})),S=f((function(){return(0,o._)("strong",null,"Rata-Rata Skor:",-1)})),_={key:1};const N={__name:"HasilUjianSnbt",props:{jadwalId:String},setup:function(e){var a=e,n=(0,c.ad)(i.H),f=(0,u.iH)([]),N=(0,u.iH)(null),I=(0,u.iH)(!0),T=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),j=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){var o,u,l,s,i,d;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o="Jf9KAZkky7PJjXGd44vi",u=(0,c.hJ)(n,"users"),l=N.value?(0,c.IO)(u,(0,c.ar)("kelas","==",o),(0,c.TQ)(N.value),(0,c.b9)(100)):(0,c.IO)(u,(0,c.ar)("kelas","==",o),(0,c.b9)(100)),e.next=6,(0,c.PL)(l);case 6:return s=e.sent,i=[],s.docs.length>0?N.value=s.docs[s.docs.length-1]:I.value=!1,d=s.docs.map(function(){var e=(0,t.Z)((0,r.Z)().mark((function e(t){var o,u,l,s,d,f;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.id,u=t.data(),l=u.fullName||"Tidak Tersedia",s=u.schoolName||"Tidak Tersedia",console.log("Memproses userId: ".concat(o,", Nama: ").concat(l,", Sekolah: ").concat(s)),e.next=7,(0,c.QT)((0,c.JU)(n,"examResults",o,"results",a.jadwalId));case 7:d=e.sent,d.exists()&&(f=d.data(),i.push({userId:o,fullName:l,schoolName:s,scoreTPS:f.scoreTPS||0,scoreMM:f.scoreMM||0,scoreLBIND:f.scoreLBIND||0,scoreLBING:f.scoreLBING||0,totalScore:f.totalScore||0,score:f.score||0,createdAt:f.createdAt?b(f.createdAt):"Tidak tersedia"}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=12,Promise.all(d);case 12:f.value=f.value.concat(i),L(),0===i.length&&x("Tidak ada pengguna yang mengikuti ujian dengan jadwal ID ini.","warning"),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),console.error("Error fetching hasil ujian:",e.t0),x("Terjadi kesalahan saat mengambil data hasil ujian.","danger");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){var o,u,l,s,i,d;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!N.value){e.next=22;break}return e.prev=1,o="Jf9KAZkky7PJjXGd44vi",u=(0,c.hJ)(n,"users"),l=(0,c.IO)(u,(0,c.ar)("kelas","==",o),(0,c.TQ)(N.value),(0,c.b9)(100)),e.next=7,(0,c.PL)(l);case 7:return s=e.sent,i=[],s.docs.length>0?N.value=s.docs[s.docs.length-1]:I.value=!1,d=s.docs.map(function(){var e=(0,t.Z)((0,r.Z)().mark((function e(t){var o,u,l,s,d,f;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.id,u=t.data(),l=u.fullName||"Tidak Tersedia",s=u.schoolName||"Tidak Tersedia",console.log("Memproses userId: ".concat(o,", Nama: ").concat(l,", Sekolah: ").concat(s)),e.next=7,(0,c.QT)((0,c.JU)(n,"examResults",o,"results",a.jadwalId));case 7:d=e.sent,d.exists()&&(f=d.data(),i.push({userId:o,fullName:l,schoolName:s,scoreTPS:f.scoreTPS||0,scoreMM:f.scoreMM||0,scoreLBIND:f.scoreLBIND||0,scoreLBING:f.scoreLBING||0,totalScore:f.totalScore||0,score:f.score||0,createdAt:f.createdAt?b(f.createdAt):"Tidak tersedia"}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=13,Promise.all(d);case 13:f.value=f.value.concat(i),L(),0===i.length&&x("Tidak ada data hasil ujian lebih lanjut.","warning"),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error("Error loading more data:",e.t0),x("Terjadi kesalahan saat memuat lebih banyak data.","danger");case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),x=function(e,a){T.value={isOpen:!0,message:e,duration:2e3,color:a}},D=function(e){return e>=80?"green":e>=60?"orange":"red"},b=function(e){if(!e)return"N/A";var a=e.toDate?e.toDate():new Date(e);return a.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},L=function(){f.value.sort((function(e,a){return a.score-e.score}))},M=function(){var e=f.value.map((function(e,a){return{No:a+1,"Nama Lengkap":e.fullName,Sekolah:e.schoolName,"Skor TPS":e.scoreTPS||0,"Skor MM":e.scoreMM||0,"Skor LBIND":e.scoreLBIND||0,"Skor LBING":e.scoreLBING||0,"Total Skor":e.totalScore||0,"Rata-Rata Skor":e.score||0,"Tanggal Dibuat":e.createdAt?b(e.createdAt):"Tidak tersedia"}})),a=d.P6.json_to_sheet(e),n=d.P6.book_new();d.P6.book_append_sheet(n,a,"Hasil Ujian"),d.NC(n,"hasil_ujian.xlsx")};return(0,o.bv)((function(){j()})),function(e,n){return(0,o.wg)(),(0,o.j4)((0,u.SU)(s._i),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,u.SU)(s.Gu),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,u.SU)(s.sr),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,u.SU)(s.wd),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Hasil Ujian: "+(0,l.zw)(a.jadwalId),1)]})),_:1}),(0,o.Wm)((0,u.SU)(s.oU),{slot:"start","default-href":"/"})]})),_:1})]})),_:1}),(0,o.Wm)((0,u.SU)(s.W2),{class:"ion-padding"},{default:(0,o.w5)((function(){return[k,(0,o.Wm)((0,u.SU)(s.YG),{expand:"full",onClick:M},{default:(0,o.w5)((function(){return[(0,o.Uk)("Ekspor ke Excel")]})),_:1}),f.value.length>0?((0,o.wg)(),(0,o.j4)((0,u.SU)(s.q_),{key:0},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.value,(function(e,a){return(0,o.wg)(),(0,o.j4)((0,u.SU)(s.Ie),{key:e.userId},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,u.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o._)("h3",null,(0,l.zw)(a+1)+". "+(0,l.zw)(e.fullName),1),(0,o._)("p",null,[p,(0,o.Uk)(" "+(0,l.zw)(e.schoolName),1)]),(0,o._)("p",null,[h,(0,o.Uk)(" "+(0,l.zw)(e.scoreTPS||0),1)]),(0,o._)("p",null,[m,(0,o.Uk)(" "+(0,l.zw)(e.scoreMM||0),1)]),(0,o._)("p",null,[g,(0,o.Uk)(" "+(0,l.zw)(e.scoreLBIND||0),1)]),(0,o._)("p",null,[w,(0,o.Uk)(" "+(0,l.zw)(e.scoreLBING||0),1)]),(0,o._)("p",null,[v,(0,o._)("span",{style:(0,l.j5)({color:D(e.totalScore)})},(0,l.zw)(e.totalScore),5)]),(0,o._)("p",null,[S,(0,o._)("span",{style:(0,l.j5)({color:D(e.score)})},(0,l.zw)(e.score),5)]),(0,o._)("p",null,"Dibuat pada: "+(0,l.zw)(e.createdAt?b(e.createdAt):"Tidak tersedia"),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})):((0,o.wg)(),(0,o.iD)("p",_,"Tidak ada pengguna yang mengikuti ujian dengan jadwal ID ini.")),I.value?((0,o.wg)(),(0,o.j4)((0,u.SU)(s.YG),{key:2,expand:"full",onClick:U},{default:(0,o.w5)((function(){return[(0,o.Uk)(" Muat Lebih Banyak ")]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)((0,u.SU)(s.Px),{"is-open":T.value.isOpen,message:T.value.message,duration:T.value.duration,color:T.value.color,onDidDismiss:n[0]||(n[0]=function(){return T.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}};var I=n(3744);const T=(0,I.Z)(N,[["__scopeId","data-v-625292cf"]]),j=T}}]);
//# sourceMappingURL=7304.dae7bfd5.js.map