"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[9658],{9658:(n,e,t)=>{t.r(e),t.d(e,{default:()=>x});var a=t(3144),r=t(124),u=t(8534),i=(t(1249),t(9826),t(1539),t(8309),t(7327),t(7658),t(3710),t(2564),t(6252)),l=t(2262),c=t(3577),o=t(39),s=t(2201),f=t(6100),d=t(316),m=t(5856),v=function(n){return(0,i.dD)("data-v-3e777f53"),n=n(),(0,i.Cn)(),n},w=v((function(){return(0,i._)("br",null,null,-1)})),p=v((function(){return(0,i._)("br",null,null,-1)})),k={key:0,class:"loading-container"},g=v((function(){return(0,i._)("p",null,"Memuat Data...",-1)})),U={key:1,class:"empty-container"},_=v((function(){return(0,i._)("p",null,"Ops, data tidak ditemukan",-1)})),h={style:{color:"whitesmoke"}},S=["innerHTML"];const W={__name:"HalamanMateri",setup:function(n){var e=(0,l.iH)(!1),t=(0,l.iH)(!1),v=(0,s.tv)(),W=(0,s.yj)(),j=(0,f.ad)(m.H),Z=(0,d.v0)(m.H),x=(0,l.iH)([]),b=(0,l.iH)(""),D=(0,l.iH)([]),y=(0,l.iH)([]),H=(0,l.iH)([]),N=(0,l.iH)(!1),P=(0,l.iH)(""),L=(0,l.iH)([]),M=(0,l.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),z=(0,l.iH)("materi");(0,i.bv)((0,u.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return n.next=4,I();case 4:return n.next=6,T();case 6:return n.next=8,J();case 8:return n.next=10,q();case 10:Y();case 11:case"end":return n.stop()}}),n)}))));var C=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e=Z.currentUser,!e){n.next=8;break}return n.next=4,(0,f.QT)((0,f.JU)(j,"users",e.uid));case 4:t=n.sent,t.exists()?b.value=t.data().kelas:E("Kelas pengguna tidak ditemukan.","danger"),n.next=9;break;case 8:E("Pengguna tidak terautentikasi.","danger");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,f.PL)((0,f.hJ)(j,"kelas"));case 2:e=n.sent,x.value=e.docs.map((function(n){return(0,a.Z)({id:n.id},n.data())}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),T=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,f.PL)((0,f.hJ)(j,"mataPelajaran"));case 2:e=n.sent,L.value=e.docs.map((function(n){return(0,a.Z)({id:n.id},n.data())}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),J=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var u;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.value=!0,n.next=4,(0,f.PL)((0,f.hJ)(j,"materi"));case 4:u=n.sent,D.value=u.docs.map((function(n){var e,t,r=n.data();return(0,a.Z)((0,a.Z)({id:n.id},r),{},{className:(null===(e=x.value.find((function(n){return n.id===r["class"]})))||void 0===e?void 0:e.name)||"N/A",subjectName:(null===(t=L.value.find((function(n){return n.id===r.subject})))||void 0===t?void 0:t.name)||"N/A"})})),console.log("Materi List:",D.value),Y(),console.log("Filtered Materi List:",y.value),t.value=0===y.value.length,n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](0),console.error("Error fetching materi:",n.t0),E("Terjadi kesalahan saat mengambil data materi.","danger");case 16:return n.prev=16,e.value=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,12,16,19]])})));return function(){return n.apply(this,arguments)}}(),q=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var t,u;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.value=!0,n.next=4,(0,f.PL)((0,f.hJ)(j,"jadwal"));case 4:t=n.sent,u=t.docs.map((function(n){var e,t,r=n.data();return(0,a.Z)((0,a.Z)({id:n.id},r),{},{className:(null===(e=x.value.find((function(n){return n.id===r.kelas})))||void 0===e?void 0:e.name)||"N/A",subjectName:(null===(t=L.value.find((function(n){return n.id===r.mataPelajaran})))||void 0===t?void 0:t.name)||"N/A",durasi:r.durasi,tanggalUjian:r.tanggalUjian,soal:r.soal||[],aktif:r.aktif,kelas:r.kelas,mataPelajaran:r.mataPelajaran})})),H.value=u.filter((function(n){var e;return n.className===(null===(e=x.value.find((function(n){return n.id===b.value})))||void 0===e?void 0:e.name)&&n.mataPelajaran===W.params.materiId})),console.log("Filtered Latihan List:",H.value),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),console.error("Error fetching jadwal ujian:",n.t0),E("Terjadi kesalahan saat mengambil data ujian.","danger");case 14:return n.prev=14,e.value=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,10,14,17]])})));return function(){return n.apply(this,arguments)}}(),A=function(n){v.push({name:"halamanujianUser",params:{jadwalId:n.id}})},O=function(n){if(!n)return"N/A";var e;if(n.seconds)e=new Date(1e3*n.seconds);else{if(!("string"===typeof n||n instanceof Date))return"Invalid Date";e=new Date(n)}return e.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},Y=function(){var n=W.params.materiId;y.value=D.value.filter((function(e){return e.subject===n&&e["class"]===b.value}))},F=function(n){P.value=n,N.value=!0},K=function(){N.value=!1},G=function(n){setTimeout((function(){J(),q(),Y(),n.target.complete()}),2e3)},E=function(n,e){M.value={isOpen:!0,message:n,duration:2e3,color:e}};return function(n,a){var r=(0,i.up)("ion-text");return(0,i.wg)(),(0,i.j4)((0,l.SU)(o._i),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Gu),{mode:"ios"},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.sr),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.wd),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Tips Dan Materi")]})),_:1}),(0,i.Wm)((0,l.SU)(o.oU),{slot:"start","default-href":"/"})]})),_:1})]})),_:1}),(0,i.Wm)((0,l.SU)(o.W2),{fullscreen:!0},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.nJ),{slot:"fixed",onIonRefresh:a[0]||(a[0]=function(n){return G(n)})},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Wo))]})),_:1}),w,p,(0,i.Wm)((0,l.SU)(o.W2),{class:"ion-padding"},{default:(0,i.w5)((function(){return[e.value?((0,i.wg)(),(0,i.iD)("div",k,[(0,i.Wm)((0,l.SU)(o.ionSpinner),{name:"crescent"}),g])):t.value?((0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(r,{color:"danger"},{default:(0,i.w5)((function(){return[_]})),_:1})])):(0,i.kq)("",!0),"materi"===z.value?((0,i.wg)(),(0,i.j4)((0,l.SU)(o.jY),{key:2},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Nd),null,{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.value,(function(n){return(0,i.wg)(),(0,i.j4)((0,l.SU)(o.wI),{size:"12","size-md":"6",key:n.id},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.PM),{style:{"background-color":"#3b5998","margin-top":"-20px"},onClick:function(e){return F(n.content)}},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Zi),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Dq),{style:{color:"whitesmoke"}},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,c.zw)(n.title),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)((0,l.SU)(o.FN),null,{default:(0,i.w5)((function(){return[(0,i._)("p",h,(0,c.zw)(n.subjectName),1)]})),_:2},1024)]})),_:2},1032,["onClick"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})):(0,i.kq)("",!0),"latihan"===z.value?((0,i.wg)(),(0,i.j4)((0,l.SU)(o.jY),{key:3},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Nd),null,{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.value,(function(n){return(0,i.wg)(),(0,i.j4)((0,l.SU)(o.wI),{size:"12","size-md":"6",key:n.id},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.PM),{class:"custom-card",style:{"background-color":"#ffcccb"},onClick:function(e){return A(n)}},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Zi),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Dq),null,{default:(0,i.w5)((function(){return[(0,i.Uk)((0,c.zw)(n.subjectName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)((0,l.SU)(o.FN),null,{default:(0,i.w5)((function(){return[(0,i._)("p",null,"Kelas: "+(0,c.zw)(n.className),1),(0,i._)("p",null,"Durasi: "+(0,c.zw)(n.durasi)+" Menit",1),(0,i._)("p",null,"Tanggal Ujian: "+(0,c.zw)(O(n.tanggalUjian)),1)]})),_:2},1024)]})),_:2},1032,["onClick"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})):(0,i.kq)("",!0)]})),_:1}),(0,i.Wm)((0,l.SU)(o.ki),{"is-open":N.value,onDidDismiss:K},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.Gu),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.sr),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.wd),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Detail Materi")]})),_:1}),(0,i.Wm)((0,l.SU)(o.Sm),{slot:"end"},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,l.SU)(o.YG),{onClick:K},{default:(0,i.w5)((function(){return[(0,i.Uk)("Close")]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.Wm)((0,l.SU)(o.W2),null,{default:(0,i.w5)((function(){return[(0,i._)("div",{innerHTML:P.value},null,8,S)]})),_:1})]})),_:1},8,["is-open"]),(0,i.Wm)((0,l.SU)(o.Px),{"is-open":M.value.isOpen,message:M.value.message,duration:M.value.duration,color:M.value.color,onDidDismiss:a[1]||(a[1]=function(){return M.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}};var j=t(3744);const Z=(0,j.Z)(W,[["__scopeId","data-v-3e777f53"]]),x=Z}}]);
//# sourceMappingURL=9658.697b7f07.js.map